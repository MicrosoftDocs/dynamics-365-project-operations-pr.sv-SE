---
title: Skapa en manuell proforma-faktura
description: I det här ämne finns information om hur du skapar en proforma-faktura.
author: rumant
manager: AnnBe
ms.date: 09/18/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-customerservice
audience: Application User
ms.reviewer: kfend
ms.search.scope: ''
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Service industries
ms.author: suvaidya
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-10-01
ms.openlocfilehash: 203b8a057d8ef3b699b20c4303061e622d2a3acd
ms.sourcegitcommit: 3a0c18823a7ad23df5aa3de272779313abe56c82
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/20/2020
ms.locfileid: "4085770"
---
# <a name="create-a-manual-proforma-invoice"></a><span data-ttu-id="b5442-103">Skapa en manuell proforma-faktura</span><span class="sxs-lookup"><span data-stu-id="b5442-103">Create a manual proforma invoice</span></span>

<span data-ttu-id="b5442-104">_**Gäller:** Project Operations för resursscenarier/icke lagerbaserade scenarier_</span><span class="sxs-lookup"><span data-stu-id="b5442-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="b5442-105">Fakturering ger projektledarna en annan godkännandenivå innan de skapar fakturor för kunder.</span><span class="sxs-lookup"><span data-stu-id="b5442-105">Invoicing gives project managers a second level of approval before they create invoices for customers.</span></span> <span data-ttu-id="b5442-106">Den första godkännandenivån slutförs när tids- och utgiftsposter som skickats från projektteammedlemmar har godkänns.</span><span class="sxs-lookup"><span data-stu-id="b5442-106">The first level of approval is completed when the time and expense entries that project team members submit are approved.</span></span>

<span data-ttu-id="b5442-107">Dynamics 365 Project Operations har inte utformats för att skapa kundfakturor, av följande orsaker:</span><span class="sxs-lookup"><span data-stu-id="b5442-107">Dynamics 365 Project Operations isn't designed to generate customer-facing invoices, for the following reasons:</span></span>

- <span data-ttu-id="b5442-108">Den innehåller inte skatteinformation.</span><span class="sxs-lookup"><span data-stu-id="b5442-108">It doesn't contain tax information.</span></span>
- <span data-ttu-id="b5442-109">Det går inte att konvertera andra valutor till faktureringsvalutan med hjälp av korrekt konfigurerade valutakurser.</span><span class="sxs-lookup"><span data-stu-id="b5442-109">It can't convert other currencies to the invoicing currency by using correctly configured exchange rates.</span></span>
- <span data-ttu-id="b5442-110">Det går inte att formatera fakturor korrekt så att de kan skrivas ut.</span><span class="sxs-lookup"><span data-stu-id="b5442-110">It can't correctly format invoices so that they can be printed.</span></span>

<span data-ttu-id="b5442-111">I stället kan du använda ett finans- eller bokföringssystem för att skapa kundfakturor som använder informationen från fakturaförslag som genereras.</span><span class="sxs-lookup"><span data-stu-id="b5442-111">Instead, you can use a financial or accounting system to create customer-facing invoices that use the information from generated invoice proposals.</span></span>

## <a name="creating-project-invoices"></a><span data-ttu-id="b5442-112">Skapa projektfakturor</span><span class="sxs-lookup"><span data-stu-id="b5442-112">Creating project invoices</span></span>

<span data-ttu-id="b5442-113">Du kan skapa projektfakturor en i taget eller i bulk.</span><span class="sxs-lookup"><span data-stu-id="b5442-113">Project invoices can be created one at a time or in bulk.</span></span> <span data-ttu-id="b5442-114">Du kan skapa dem manuellt, eller så kan de konfigureras så att de genereras i automatiska körningar.</span><span class="sxs-lookup"><span data-stu-id="b5442-114">You can create them manually, or they can be configured so that they are generated in automated runs.</span></span>

### <a name="manually-create-project-invoices"></a><span data-ttu-id="b5442-115">Skapa projektfakturor manuellt</span><span class="sxs-lookup"><span data-stu-id="b5442-115">Manually create project invoices</span></span> 

<span data-ttu-id="b5442-116">På listsidan **projektkontrakt** kan du skapa projektfakturor separat för varje projektkontrakt, eller så kan du skapa fakturor i bulk för flera projektkontrakt.</span><span class="sxs-lookup"><span data-stu-id="b5442-116">From the **Project Contracts** list page, you can create project invoices separately for each project contract, or you can create invoices in bulk for multiple project contracts.</span></span>

<span data-ttu-id="b5442-117">Följ det här steget om du vill skapa en faktura för ett specifikt projektkontrakt.</span><span class="sxs-lookup"><span data-stu-id="b5442-117">Follow this step to create an invoice for a specific project contract.</span></span>

- <span data-ttu-id="b5442-118">På listsidan **projektkontrakt** , öppna ett projektkontrakt och välj sedan **skapa faktura**.</span><span class="sxs-lookup"><span data-stu-id="b5442-118">On the **Project Contracts** list page, open a project contract, and then select **Create Invoice**.</span></span>

    <span data-ttu-id="b5442-119">En faktura skapas för alla transaktioner för det valda projektkontraktet som har statusvärdet **klart att fakturera**.</span><span class="sxs-lookup"><span data-stu-id="b5442-119">An invoice is generated for all transactions for the selected project contract that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="b5442-120">Dessa transaktioner inkluderar tid, utgifter, milstolpar och produktbaserade kontraktrader.</span><span class="sxs-lookup"><span data-stu-id="b5442-120">These transactions include time, expenses, milestones, and product-based contract lines.</span></span>

<span data-ttu-id="b5442-121">Följ stegen nedan om du vill skapa fakturor i bulk.</span><span class="sxs-lookup"><span data-stu-id="b5442-121">Follow these steps to create invoices in bulk.</span></span>

1. <span data-ttu-id="b5442-122">På listsidan **projektkontrakt** väljer du ett eller flera projektkontrakt som du måste skapa en faktura för och väljer sedan **skapa projektfakturor**.</span><span class="sxs-lookup"><span data-stu-id="b5442-122">On the **Project Contracts** list page, select one or more project contracts that you must create an invoice for, and then select **Create Project Invoices**.</span></span>

    <span data-ttu-id="b5442-123">Ett varningsmeddelande visas med information om att en fördröjning kan uppstå innan fakturorna skapas.</span><span class="sxs-lookup"><span data-stu-id="b5442-123">A warning message informs you that there might be a delay before invoices are created.</span></span> <span data-ttu-id="b5442-124">Även processen visas.</span><span class="sxs-lookup"><span data-stu-id="b5442-124">The process is also shown.</span></span>

2. <span data-ttu-id="b5442-125">Stäng meddelanderutan genom att välja **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5442-125">Select **OK** to close the message box.</span></span>

    <span data-ttu-id="b5442-126">En faktura skapas för alla transaktioner på en kontraktsrad som har statusvärdet **klart att fakturera**.</span><span class="sxs-lookup"><span data-stu-id="b5442-126">An invoice is generated for all transactions on a contract line that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="b5442-127">Dessa transaktioner inkluderar tid, utgifter, milstolpar och produktbaserade kontraktrader.</span><span class="sxs-lookup"><span data-stu-id="b5442-127">These transactions include time, expenses, milestones, and product-based contract lines.</span></span>

3. <span data-ttu-id="b5442-128">Om du vill visa fakturorna som genereras går du till **försäljning** \> **fakturering** \> **fakturor**.</span><span class="sxs-lookup"><span data-stu-id="b5442-128">To view the invoices that are generated, go to **Sales** \> **Billing** \> **Invoices**.</span></span> <span data-ttu-id="b5442-129">En faktura visas för varje projektkontrakt.</span><span class="sxs-lookup"><span data-stu-id="b5442-129">You will see one invoice for each project contract.</span></span>

### <a name="set-up-automated-creation-of-project-invoices"></a><span data-ttu-id="b5442-130">Konfigurera automatisk skapande av projektfakturor</span><span class="sxs-lookup"><span data-stu-id="b5442-130">Set up automated creation of project invoices</span></span> 

<span data-ttu-id="b5442-131">Följ stegen nedan om du vill konfigurera en automatisk fakturakörning.</span><span class="sxs-lookup"><span data-stu-id="b5442-131">Follow these steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="b5442-132">Gå till **Inställningar** \> **Batchjobb**.</span><span class="sxs-lookup"><span data-stu-id="b5442-132">Go to **Settings** \> **Batch jobs**.</span></span>
2. <span data-ttu-id="b5442-133">Skapa ett batch-jobb och ge det namnet **Project Operations skapa fakturor**.</span><span class="sxs-lookup"><span data-stu-id="b5442-133">Create a batch job, and name it **Project Operations Create Invoices**.</span></span> <span data-ttu-id="b5442-134">Namnet på batch-jobbet måste innehålla termen "skapa fakturor".</span><span class="sxs-lookup"><span data-stu-id="b5442-134">The name of the batch job must include the term "Create Invoices."</span></span>
3. <span data-ttu-id="b5442-135">I fältet **Jobbtyp** , välj **Ingen**.</span><span class="sxs-lookup"><span data-stu-id="b5442-135">In the **Job type** field, select **None**.</span></span> <span data-ttu-id="b5442-136">Som standard är alternativen **Frekvens dagligen** och **Är aktiv** angivna som **Ja**.</span><span class="sxs-lookup"><span data-stu-id="b5442-136">By default, the **Frequency Daily** and **Is Active** options are set to **Yes**.</span></span>
4. <span data-ttu-id="b5442-137">Välj **Kör arbetsflöde**.</span><span class="sxs-lookup"><span data-stu-id="b5442-137">Select **Run Workflow**.</span></span> <span data-ttu-id="b5442-138">I dialogrutan **Sök efter post** visas tre arbetsflöden:</span><span class="sxs-lookup"><span data-stu-id="b5442-138">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

    - <span data-ttu-id="b5442-139">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="b5442-139">ProcessRunCaller</span></span>
    - <span data-ttu-id="b5442-140">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="b5442-140">ProcessRunner</span></span>
    - <span data-ttu-id="b5442-141">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="b5442-141">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="b5442-142">Välj **ProcessRunCaller** och välj **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="b5442-142">Select **ProcessRunCaller** , and then select **Add**.</span></span>
6. <span data-ttu-id="b5442-143">Klicka på **OK** i nästa dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="b5442-143">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="b5442-144">Arbetsflödet **Vila** följs av **Process**.</span><span class="sxs-lookup"><span data-stu-id="b5442-144">A **Sleep** workflow is followed by a **Process** workflow.</span></span>

    <span data-ttu-id="b5442-145">Du kan också välja **ProcessRunner** i steg 5.</span><span class="sxs-lookup"><span data-stu-id="b5442-145">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="b5442-146">När du sedan väljer **OK** , följs arbetsflödet **Process** av arbetsflödet **Vila**.</span><span class="sxs-lookup"><span data-stu-id="b5442-146">Then, when you select **OK** , a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="b5442-147">Arbetsflödena **ProcessRunCaller** och **ProcessRunner** skapar fakturor.</span><span class="sxs-lookup"><span data-stu-id="b5442-147">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="b5442-148">**ProcessRunCaller** anropar **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="b5442-148">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="b5442-149">**ProcessRunner** är det arbetsflöde som verkligen skapade fakturorna.</span><span class="sxs-lookup"><span data-stu-id="b5442-149">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="b5442-150">Det går igenom alla kontraktrader som fakturorna måste skapas för och fakturor för dessa rader skapas.</span><span class="sxs-lookup"><span data-stu-id="b5442-150">It goes through all the contract lines that invoices must be created for, and it creates invoices for those lines.</span></span> <span data-ttu-id="b5442-151">För att fastställa vilka kontraktsrader som fakturor ska skapas tittar jobbet på körningsdatum för faktura för kontraktsraderna.</span><span class="sxs-lookup"><span data-stu-id="b5442-151">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="b5442-152">Om kontraktsrader som tillhör ett kontrakt har samma datum för fakturakörning kombineras transaktionerna till en faktura med två fakturarader.</span><span class="sxs-lookup"><span data-stu-id="b5442-152">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="b5442-153">Om det inte finns några transaktioner för att skapa fakturor hoppar jobbet över skapandet av fakturan.</span><span class="sxs-lookup"><span data-stu-id="b5442-153">If there are no transactions to create invoices for, the job skips invoice creation.</span></span>

<span data-ttu-id="b5442-154">När **ProcessRunner** har körts klart anropas **ProcessRunCaller** , anger sluttiden och är stängd.</span><span class="sxs-lookup"><span data-stu-id="b5442-154">After **ProcessRunner** has finished running, it calls **ProcessRunCaller** , provides the end time, and is closed.</span></span> <span data-ttu-id="b5442-155">**ProcessRunCaller** startar sedan en timer som körs i 24 timmar från den angivna sluttiden.</span><span class="sxs-lookup"><span data-stu-id="b5442-155">**ProcessRunCaller** then starts a timer that runs for 24 hours from the specified end time.</span></span> <span data-ttu-id="b5442-156">**ProcessRunCaller** stängs i slutet av timern.</span><span class="sxs-lookup"><span data-stu-id="b5442-156">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="b5442-157">Batchprocessjobbet för att skapa fakturor är ett återkommande jobb.</span><span class="sxs-lookup"><span data-stu-id="b5442-157">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="b5442-158">Om batchprocessen körs flera gånger skapas flera instanser av jobbet och det uppstår fel.</span><span class="sxs-lookup"><span data-stu-id="b5442-158">If this batch process is run many times, multiple instances of the job are created and cause errors.</span></span> <span data-ttu-id="b5442-159">Därför bör du endast starta batchprocessen en gång och du bör starta om den endast om den slutar att fungera.</span><span class="sxs-lookup"><span data-stu-id="b5442-159">Therefore, you should start the batch process only one time, and you should restart it only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="b5442-160">Batchfakturering körs endast för projektkontraktrader som konfigurerats av fakturascheman.</span><span class="sxs-lookup"><span data-stu-id="b5442-160">Batch invoicing only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="b5442-161">En kontraktrad med en fast pris faktureringsmetod måste ha milstolpar konfigurerad.</span><span class="sxs-lookup"><span data-stu-id="b5442-161">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="b5442-162">En projekts kontraktrad med en tids- och material faktureringsmetod måste ha en datumbaserad fakturauppställning.</span><span class="sxs-lookup"><span data-stu-id="b5442-162">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span> <span data-ttu-id="b5442-163">Detsamma gäller för en projektrelaterad kontraktrad.</span><span class="sxs-lookup"><span data-stu-id="b5442-163">The same applies to a project-based contract line.</span></span>      
 
### <a name="edit-a-draft-invoice"></a><span data-ttu-id="b5442-164">Redigera ett utkast till en faktura</span><span class="sxs-lookup"><span data-stu-id="b5442-164">Edit a draft invoice</span></span>

<span data-ttu-id="b5442-165">När du skapar ett utkast till en projektfaktura skickas alla ej fakturerade försäljningstransaktioner som skapades när utgiftsposterna godkändes.</span><span class="sxs-lookup"><span data-stu-id="b5442-165">When you create a draft project invoice, all unbilled sales transactions that were created when the time and expense entries were approved are pulled onto the invoice.</span></span> <span data-ttu-id="b5442-166">Du kan göra följande justeringar medan fakturan är i ett utkaststadium:</span><span class="sxs-lookup"><span data-stu-id="b5442-166">You can make the following adjustments while the invoice is still in a draft stage:</span></span>

- <span data-ttu-id="b5442-167">Ta bort eller redigera information om fakturarader.</span><span class="sxs-lookup"><span data-stu-id="b5442-167">Delete or edit invoice line details.</span></span>
- <span data-ttu-id="b5442-168">Redigera och justera kvantitet och faktureringstyp.</span><span class="sxs-lookup"><span data-stu-id="b5442-168">Edit and adjust the quantity and billing type.</span></span>
- <span data-ttu-id="b5442-169">Lägg direkt till tid, utgifter och avgifter som transaktioner på fakturan.</span><span class="sxs-lookup"><span data-stu-id="b5442-169">Directly add time, expense, and fees as transactions on the invoice.</span></span> <span data-ttu-id="b5442-170">Du kan använda den här funktionen om fakturaraden är mappad till en kontraktsrad som tillåter dessa transaktionsklasser.</span><span class="sxs-lookup"><span data-stu-id="b5442-170">You can use this feature if the invoice line is mapped to a contract line that allows for these transaction classes.</span></span>

<span data-ttu-id="b5442-171">Välj **bekräfta** om du vill bekräfta en faktura.</span><span class="sxs-lookup"><span data-stu-id="b5442-171">Select **Confirm** to confirm an invoice.</span></span> <span data-ttu-id="b5442-172">Åtgärden Bekräfta är en enkelriktad åtgärd.</span><span class="sxs-lookup"><span data-stu-id="b5442-172">The Confirm action is a one-way action.</span></span> <span data-ttu-id="b5442-173">När du väljer **bekräfta** blir fakturan skrivskyddad och verkliga värden för fakturerad försäljning skapas utifrån varje fakturaradinformation för varje fakturarad.</span><span class="sxs-lookup"><span data-stu-id="b5442-173">When you select **Confirm** , the system makes the invoice read-only and creates billed sales actuals from each invoice line detail for each invoice line.</span></span> <span data-ttu-id="b5442-174">Om fakturaradinformationen refererar till en ofakturerad faktisk försäljning återförs även den ofakturerade faktiska försäljningen.</span><span class="sxs-lookup"><span data-stu-id="b5442-174">If the invoice line detail references an unbilled sales actual, the system also reverses the unbilled sales actual.</span></span> <span data-ttu-id="b5442-175">(All information på fakturaraden som skapades från en tidpunkt eller utgiftspost refererar till en ofakturerad faktisk försäljning.) Integreringssystemen för redovisning kan använda den här återföringen för att omvända pågående pågående projekt (WIP) i redovisningssyfte.</span><span class="sxs-lookup"><span data-stu-id="b5442-175">(Any invoice line detail that was created from a time or expense entry will reference an unbilled sales actual.) General ledger integration systems can use this reversal to reverse project work in progress (WIP) for accounting purposes.</span></span>

### <a name="correct-a-confirmed-invoice"></a><span data-ttu-id="b5442-176">Korrigera en bekräftad faktura</span><span class="sxs-lookup"><span data-stu-id="b5442-176">Correct a confirmed invoice</span></span>

<span data-ttu-id="b5442-177">Bekräftade fakturor kan redigeras (korrigeras).</span><span class="sxs-lookup"><span data-stu-id="b5442-177">Confirmed invoices can be edited (corrected).</span></span> <span data-ttu-id="b5442-178">När du korrigerar en bekräftad faktura skapas en ny korrigeringsfaktura för utkast.</span><span class="sxs-lookup"><span data-stu-id="b5442-178">When you correct a confirmed invoice, a new draft corrective invoice is created.</span></span> <span data-ttu-id="b5442-179">Eftersom det är en förutsättning att du vill återföra alla transaktioner och kvantiteter från den ursprungliga fakturan, inkluderar den korrigerande fakturan alla transaktioner från den ursprungliga fakturan och alla kvantiteter på den är 0 (noll).</span><span class="sxs-lookup"><span data-stu-id="b5442-179">Because the assumption is that you want to reverse all the transactions and quantities from the original invoice, this corrective invoice includes all the transactions from the original invoice, and all the quantities on it are 0 (zero).</span></span>

<span data-ttu-id="b5442-180">Om en transaktion inte kräver korrigering kan du ta bort dem från utkastfakturan.</span><span class="sxs-lookup"><span data-stu-id="b5442-180">If any transactions don't require correction, you can remove them from the draft corrective invoice.</span></span> <span data-ttu-id="b5442-181">Om du vill återföra eller returnera en delkvantitet kan du redigera fältet **antal** på raddetaljen.</span><span class="sxs-lookup"><span data-stu-id="b5442-181">If you want to reverse or return only a partial quantity, you can edit the **Quantity** field on the line detail.</span></span> <span data-ttu-id="b5442-182">Om du öppnar fakturaradinformationen visas ursprungligt fakturaantal.</span><span class="sxs-lookup"><span data-stu-id="b5442-182">If you open the invoice line detail, you can see the original invoice quantity.</span></span> <span data-ttu-id="b5442-183">Du kan sedan redigera aktuellt fakturerat antal så att det är mindre än eller lika med den ursprungliga fakturan.</span><span class="sxs-lookup"><span data-stu-id="b5442-183">You can then edit the current invoice quantity so that it's less than or more than the original invoice quantity.</span></span>

<span data-ttu-id="b5442-184">När du bekräftar en rättningsfaktura återförs den ursprungliga fakturerade faktiska försäljningen och en ny fakturerad faktisk försäljning skapas.</span><span class="sxs-lookup"><span data-stu-id="b5442-184">When you confirm a corrective invoice, the original billed sales actual is reversed, and a new billed sales actual is created.</span></span> <span data-ttu-id="b5442-185">Om antalet minskas kommer differensen att skapa en ny fakturerad faktiskt försäljning.</span><span class="sxs-lookup"><span data-stu-id="b5442-185">If the quantity was reduced, the difference will cause a new unbilled sales actual to be created too.</span></span> <span data-ttu-id="b5442-186">Om t.ex. den ursprungliga fakturerade försäljningen var åtta timmar och detaljerna för den korrigerade fakturaraden har en mindre mängd på sex timmar, återförs den ursprungliga faktureringsförsäljningsraden och två nya faktiska värden skapas:</span><span class="sxs-lookup"><span data-stu-id="b5442-186">For example, if the original billed sale was for eight hours, and the corrective invoice line detail has a reduced quantity of six hours, the original billed sales line is reversed and two new actuals are created:</span></span>

- <span data-ttu-id="b5442-187">En fakturerad faktisk försäljning som faktiskt innehåller sex timmar.</span><span class="sxs-lookup"><span data-stu-id="b5442-187">A billed sales actual for six hours.</span></span>
- <span data-ttu-id="b5442-188">En ofakturerad faktisk försäljning för de återstående två timmarna.</span><span class="sxs-lookup"><span data-stu-id="b5442-188">An unbilled sales actual for the remaining two hours.</span></span> <span data-ttu-id="b5442-189">Denna transaktion kan antingen faktureras senare eller vara markerad som icke debiterbar, beroende på förhandlingarna med kunden.</span><span class="sxs-lookup"><span data-stu-id="b5442-189">This transaction can either be billed later or marked as non-chargeable, depending on the negotiations with the customer.</span></span>
